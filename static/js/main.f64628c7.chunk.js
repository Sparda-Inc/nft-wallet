(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){},46:function(e,t,n){e.exports=n(56)},51:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),o=n.n(c),s=(n(51),n(9)),i=n.n(s),l=n(17),u=n(7),d=(n(35),n(15)),m=n(77),p=n(82),f=n(81),b=n(80),v=n(76),h=n(79),w=function(e){var t=document.getElementById(e).className;document.getElementById(e).className="hidden"===t?"imgContain":"hidden"},y=function(){var e=Object(l.a)(i.a.mark(function e(t,n,a){var r,c,o,s,l,u,d,m,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem(t),c=null,c="ZRC1"===r?"Transfer":"TransferFrom",o="z"===(o=a)[0]?window.zilPay.crypto.fromBech32Address(a):a.toLowerCase(),console.log(t,o,c,n),s=window.zilPay,l=s.contracts,u=s.utils,s.wallet,d=l.at(t),m=u.units.toQa(0,u.units.Units.Zil),p=u.units.toQa("1000",u.units.Units.Li),e.next=12,d.call(c,[{vname:"to",type:"ByStr20",value:o},{vname:"token_id",type:"Uint256",value:n}],{amount:m,gasPrice:p,gasLimit:u.Long.fromNumber(9e3)},!0);case 12:e.sent;case 13:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}();function E(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)("SEND"),i=Object(u.a)(s,2),l=i[0],d=i[1];return r.a.createElement(m.a,{className:"cardBody",sx:{maxWidth:345,backgroundColor:"#adadad"}},r.a.createElement(b.a,{component:"img",image:e.source,alt:"Some NFT Image"}),r.a.createElement(f.a,null,r.a.createElement(h.a,null,"Token ID: "+e.token," "),r.a.createElement(h.a,{gutterBottom:!0,variant:"h5",component:"div"},e.name),r.a.createElement("div",{id:e.code,className:"hidden"},r.a.createElement(h.a,{variant:"body2",color:"text.secondary"},e.describe)),r.a.createElement("div",{id:e.code+"send",className:"hidden"},r.a.createElement("input",{className:"send-input",placeholder:"Send to...",onChange:function(e){return o(e.target.value)},type:"text"}),r.a.createElement("button",{className:"send-button",onClick:function(){return y(e.contract,e.token,c)}},"Send"))),r.a.createElement(p.a,null,r.a.createElement(v.a,{onClick:function(){return w(e.code)},size:"small"},"View More"),r.a.createElement(v.a,{onClick:function(){w(e.code+"send"),d("SEND"===l?"CANCEL":"SEND")},size:"small"},l)))}var O=function(e){var t=Object(a.useState)(e.user),n=Object(u.a)(t,2),c=n[0],o=(n[1],Object(a.useState)([])),s=Object(u.a)(o,2),m=s[0],p=s[1];return Object(a.useEffect)(function(){var t=[],n=JSON.stringify({id:"1",jsonrpc:"2.0",method:"GetSmartContractState",params:[e.address.slice(2)]}),a=new XMLHttpRequest;a.addEventListener("readystatechange",Object(l.a)(i.a.mark(function n(){var a,r,c,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(4!==this.readyState){n.next=8;break}return n.next=3,JSON.parse(this.responseText);case 3:for(a=n.sent,r=Object.values(a.result.token_owners),c=Object.keys(a.result.token_owners),o=0;o<r.length;o++)r[o]===e.user.toLowerCase()&&t.push(c[o]);t.map(function(){var e=Object(l.a)(i.a.mark(function e(t,n){var r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.result.token_uris[t]);case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).resource_mimetype&&"image/jpeg"===c.resource_mimetype?p(function(e){return[].concat(Object(d.a)(e),[{image:c.resource,name:c.title,describe:c.description,tokenId:t}])}):"video"===c.media_type||p(function(e){return[].concat(Object(d.a)(e),[{image:c.image,name:c.title,describe:c.description,tokenId:t}])});case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 8:case"end":return n.stop()}},n,this)}))),a.open("POST","https://api.zilliqa.com/"),a.setRequestHeader("Content-Type","application/json"),a.send(n)},[c]),r.a.createElement("div",{id:e.address,className:"hidden"},r.a.createElement("div",{className:"nftContainer",id:"imgCon"+e.address},m.map(function(t){return r.a.createElement("div",{key:m.indexOf(t)+"-card"},r.a.createElement(E,{className:"card",contract:e.address,source:t.image,name:t.name,describe:t.describe,token:t.tokenId,code:t.name+(n=1e3,Math.floor(Math.random()*n))}));var n})))},g=function(e){var t=JSON.stringify({id:"1",jsonrpc:"2.0",method:"GetSmartContractInit",params:[e.slice(2)]}),n=new XMLHttpRequest;n.addEventListener("readystatechange",Object(l.a)(i.a.mark(function t(){var n,a,r,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(4!==this.readyState){t.next=6;break}return t.next=3,JSON.parse(this.responseText);case 3:for(n=t.sent,a=n.result,r=0;r<a.length;r++)"name"===a[r].vname&&(c=a[r].value,document.getElementById("con-"+e).innerText=c);case 6:case"end":return t.stop()}},t,this)}))),n.open("POST","https://api.zilliqa.com/"),n.setRequestHeader("Content-Type","application/json"),n.send(t)},k=function(e){var t=Object(a.useState)(e.connectedUser),n=Object(u.a)(t,2),c=n[0],o=(n[1],Object(a.useState)(Object.keys(localStorage))),s=Object(u.a)(o,2),i=s[0];s[1];return i.map(function(e){return g(e)}),r.a.createElement("div",null,r.a.createElement("h1",null,"Nft Gallery"),i.map(function(e){return r.a.createElement("div",{key:i.indexOf(e)},r.a.createElement("h1",{className:"collection_title",id:"con-"+e,onClick:function(){w(e)}},"Loading Name..."),r.a.createElement(O,{user:c,address:e}))}))},j=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(Object.keys(localStorage)),s=Object(u.a)(o,2),d=s[0],m=s[1];function p(){return(p=Object(l.a)(i.a.mark(function e(t,n){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(localStorage).indexOf(t)>-1)){e.next=5;break}return alert("already added"),e.abrupt("return");case 5:a=JSON.stringify({id:"1",jsonrpc:"2.0",method:"GetSmartContractState",params:[t.slice(2)]}),(r=new XMLHttpRequest).addEventListener("readystatechange",Object(l.a)(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(4!==this.readyState){e.next=12;break}return e.prev=1,e.next=4,JSON.parse(this.responseText);case 4:n=e.sent,console.log(n),void 0!==n.result.token_id_count?n.result.royalty_fee_bps?(localStorage.setItem(t,"ZRC6"),d.concat(t),m(d)):(localStorage.setItem(t,"ZRC1"),d.concat(t),m(d)):alert("Not a NFT contract"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("Contract Not Found");case 12:case"end":return e.stop()}},e,this,[[1,9]])}))),r.open("POST","https://api.zilliqa.com/"),r.setRequestHeader("Content-Type","application/json"),r.send(a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{onChange:function(e){return c(e.target.value)},type:"text"}),r.a.createElement("button",{onClick:function(){return function(e,t){return p.apply(this,arguments)}(n,"NFT")}},"ADD Contract"))},S=function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.zilPay.wallet.connect();case 2:if(!e.sent){e.next=6;break}return window.zilPay.wallet.observableAccount().subscribe(function(e){return console.log(e.bech32)}),e.abrupt("return",window.zilPay.wallet.defaultAccount.base16);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();var x=function(){var e=Object(a.useState)(window.zilPay.wallet.defaultAccount),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",{className:"app"},r.a.createElement("p",null,"Must Have Zilpay Installed"),null===n?null:r.a.createElement("h1",{className:"address",onClick:function(){return function(e){window.location.href="https://viewblock.io/zilliqa/address/".concat(e)}(n.bech32)}},n.bech32),r.a.createElement(j,null),r.a.createElement("br",null)," ",r.a.createElement("br",null),null===n?r.a.createElement("button",{onClick:Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:c(window.zilPay.wallet.defaultAccount);case 3:case"end":return e.stop()}},e)}))},"Connect"):r.a.createElement(k,{connectedUser:n.base16}))};o.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.f64628c7.chunk.js.map